library(tidycensus)
library(tidyverse)
library(sf)
library(mapview)

#census_api_key("CENSUS_API_KEY")

year = 2023

profile_vars <- c(
  Total_Pop = "S0101_C01_001",
  Total_Pop_under5 = "S0101_C01_002",
  Total_Pop_5to9 = "S0101_C01_003",
  Total_Pop_10to14 = "S0101_C01_004",
  Total_Pop_15to19 = "S0101_C01_005",
  Total_Pop_20to24 = "S0101_C01_006",
  Total_Pop_25to29 = "S0101_C01_007",
  Total_Pop_30to34 = "S0101_C01_008",
  Total_Pop_35to39 = "S0101_C01_009",
  Total_Pop_40to44 = "S0101_C01_010",
  Total_Pop_45to49 = "S0101_C01_011",
  Total_Pop_50to54 = "S0101_C01_012",
  Total_Pop_55to59 = "S0101_C01_013",
  Total_Pop_60to64 = "S0101_C01_014",
  Total_Pop_65to69 = "S0101_C01_015",
  Total_Pop_70to74 = "S0101_C01_016",
  Total_Pop_75to79 = "S0101_C01_017",
  Total_Pop_80to84 = "S0101_C01_018",
  Total_Pop_85andover = "S0101_C01_019",
  Total_Pop_under18 = "S0101_C01_022",
  PercUnder18 = "S0101_C02_022",
  Total_Pop_65plus = "S0101_C01_030",
  Perc65plus = "S0101_C02_030",
  MedianAge = "S0101_C01_032",
  TotalFBandNB = "B05002_001",
  TotalFB = "B05002_013",
  FB_cit_Europe = "B05002_015",
  FB_cit_Asia = "B05002_016",
  FB_cit_Africa = "B05002_017",
  FB_cit_Oceania = "B05002_018",
  FB_cit_LatinAmer = "B05002_019",
  FB_cit_NorthAmer = "B05002_020",
  FB_noncit_Europe = "B05002_022",
  FB_noncit_Asia = "B05002_023",
  FB_noncit_Africa = "B05002_024",
  FB_noncit_Oceania = "B05002_025",
  FB_noncit_LatinAmer = "B05002_026",
  FB_noncit_NorthAmer = "B05002_027",
  nonvet_civ_18over = "B21001_001",
  veterans = "B21001_002",
  households_total = "S1901_C01_001",
  HHLess10k = "S1901_C01_002",
  HH10kto14999 = "S1901_C01_003",
  HH15kto24999 = "S1901_C01_004",
  HH25kto34999 = "S1901_C01_005",
  HH35kto49999 = "S1901_C01_006",
  HH50kto74999 = "S1901_C01_007",
  HH75kto99999 = "S1901_C01_008",
  HH100kto149999 = "S1901_C01_009",
  HH150kto199999 = "S1901_C01_010",
  HH200kmore = "S1901_C01_011",
  MedianHouseholdIncome = "S1901_C01_012",
  MedianFamilyIncome = "S1901_C02_012",
  TotalPop = "B03002_001",
  NHWhite = "B03002_003",
  NHBlack = "B03002_004",
  NH_AIAN = "B03002_005",
  NHAsian = "B03002_006",
  NH_NHPI = "B03002_007",
  NHOther = "B03002_008",
  NHMultiracial = "B03002_009",
  Hispanic = "B03002_012",
  Total_HU = "DP04_0001",
  Occupied_HU = "DP04_0002",
  HU_1unit_detached = "DP04_0007",
  Perc_1unit_detached = "DP04_0007P",
  HU_1unit_attached = "DP04_0008",
  Perc_1unit_attached = "DP04_0008P",
  HU_2units = "DP04_0009",
  Perc_2units = "DP04_0009P",
  HU_3or4units = "DP04_0010",
  Perc_3or4units = "DP04_0010P",
  HU_5to9units = "DP04_0011",
  Perc_5to9units = "DP04_0011P",
  HU_10to19units = "DP04_0012",
  Perc_10to19units = "DP04_0012P",
  HU_20moreunits = "DP04_0013",
  Perc_20moreunits = "DP04_0013P",
  HU_mobilehome = "DP04_0014",
  Perc_mobilehome = "DP04_0014P",
  HU_boat_rv_van = "DP04_0015",
  Perc_boat_rv_van = "DP04_0015P",
  HH_total = "S1101_C01_001",
  HH_average_size = "S1101_C01_002",
  HH_ownchild_under18 = "S1101_C01_005",
  PercHH_with_under18 = "S1101_C01_010",
  HH_with_under18 = "B11005_002",
  PercHH_livingalone = "S1101_C01_013",
  HH_livingalone_65plus = "S1101_C01_014",
  Families_total = "S1101_C01_003",
  avg_family_size = "S1101_C01_004",
  education_totalpop = "S1501_C01_006",
  education_HS_higher = "S1501_C01_014",
  PercHSorhigher = "S1501_C02_014",
  education_BA_higher = "S1501_C01_015",
  PercBAorhigher = "S1501_C02_015",
  education_NHwhite = "S1501_C01_031",
  education_NHWhite_HShigher = "S1501_C01_032",
  PercNHW_HShigher = "S1501_C02_032",
  education_NHWhite_BAhigher = "S1501_C01_033",
  PercNHW_BAhigher = "S1501_C02_033",
  education_Black = "S1501_C01_034",
  education_Black_HShigher = "S1501_C01_035",
  PercBlack_HShigher = "S1501_C02_035",
  education_Black_BAhigher = "S1501_C01_036",
  PercBlack_BAhigher = "S1501_C02_036",
  education_AIAN = "S1501_C01_037",
  education_AIAN_HShigher = "S1501_C01_038",
  education_AIAN_BAhigher = "S1501_C01_039",
  education_Asian = "S1501_C01_040",
  education_Asian_HShigher = "S1501_C01_041",
  PercAsianHShigher = "S1501_C02_041",
  education_Asian_BAhigher = "S1501_C01_042",
  PercAsianBAhigher = "S1501_C02_042",
  education_NHPI = "S1501_C01_043",
  education_NHPI_HShigher = "S1501_C01_044",
  education_NHPI_BAhigher = "S1501_C01_045",
  education_otherrace = "S1501_C01_046",
  education_other_HShigher = "S1501_C01_047",
  PercOtherHShigher = "S1501_C02_047",
  education_other_BAhigher = "S1501_C01_048",
  PercOtherBAhigher = "S1501_C02_048",
  education_multi = "S1501_C01_049",
  education_multi_HShigher = "S1501_C01_050",
  PercMultiHShigher = "S1501_C02_050",
  education_multi_BAhigher = "S1501_C01_051",
  PercMultiBAhigher = "S1501_C02_051",
  education_Hispanic = "S1501_C01_052",
  education_hisp_HShigher = "S1501_C01_053",
  PercHispHShigher = "S1501_C02_053",
  education_hisp_BAhigher = "S1501_C01_054",
  PercHispBAhigher = "S1501_C02_054",
  civ_noninst_pop = "DP03_0095",
  NoHealthCoverage = "DP03_0099",
  PercNoHealthInsurance = "DP03_0099P",
  PopUnder19 = "B27010_002",
  NoHealthInsuraceUnder19 = "B27010_017",
  over65 = "B27010_051",
  NoHealthInsurance65over = "B27010_066",
  pct_disability = "S1810_C03_001",
  disability_HearingDifficulty = "S1810_C03_019",
  disability_VisionDifficulty = "S1810_C03_029",
  disability_CognitiveDisability = "S1810_C03_039",
  disability_AmbulatoryDifficulty = "S1810_C03_047",
  disability_SelfCareDifficulty = "S1810_C03_055",
  disability_IndependentLivingDifficulty = "S1810_C03_063",
  PopDeterminePovStat = "S1701_C01_001",
  pct_poverty = "S1701_C03_001",
  BlackBelowPoverty = "S1701_C03_014",
  AIANBelowPoverty = "S1701_C03_015",
  AsianBelowPoverty = "S1701_C03_016",
  NHPIBelowPoverty = "S1701_C03_017",
  OtherBelowPoverty = "S1701_C03_018",
  MultiracialBelowPoverty = "S1701_C03_019",
  HispanicBelowPoverty = "S1701_C03_020",
  NHWhiteBelowPoverty = "S1701_C03_021",
  PercPopBelowPoverty = "S1701_C03_001",
  PercPopBelowPovertyUnder18 = "S1701_C03_002",
  PercPopBelowPoverty65plus = "S1701_C03_010",
  TotalHouseholds = "S2201_C01_001",
  HH_SNAP = "S2201_C03_001",
  PercHHSNAP = "S2201_C04_001",
  PercBlackSNAP = "S2201_C04_026",
  PercAIANSNAP = "S2201_C04_027",
  PercAsianSNAP = "S2201_C04_028",
  PercNHPISNAP = "S2201_C04_029",
  PercAnotherSNAP = "S2201_C04_030",
  PercMultiSNAP = "S2201_C04_031",
  PercHispSNAP = "S2201_C04_032",
  PercNHWSNAP = "S2201_C04_033",
  HHNoInternet = "S2801_C01_019",
  pct_no_internet = "S2801_C02_019",
  HH_lessthan20k_nointernet = "S2801_C01_023",
  pct_lessthan20l_nointernet = "S2801_C02_023",
  Total_HU = "B25045_001",
  HU_OwnerOccupied = "B25045_002",
  HU_OwnerOccupiedNoVehicle = "B25045_003",
  HU_RenterOccupied = "B25045_011",
  HU_RenterOccupiedNoVehicle = "B25045_012",
  Pop5andOver = "S1601_C01_001",
  LimitedEnglish = "S1601_C05_001",
  PercLimitedEnglish = "S1601_C06_001",
  occupied_HU = "S2502_C01_001",
  OwnerOccupiedHU = "S2502_C03_001",
  BlackOwnerOccupiedHU = "S2502_C03_003",
  AsianOwnerOccupiedHU = "S2502_C03_005",
  OtherOwnerOccupiedHU = "S2502_C03_007",
  MultiracialOwnerOccupiedHU = "S2502_C03_008",
  HispanicOwnerOccupiedHU = "S2502_C03_009",
  NHWhiteOwnerOccupiedHU = "S2502_C03_010",
  BlackRenterOccupiedHU = "S2502_C05_003",
  AsianRenterOccupiedHU = "S2502_C05_005",
  OtherRenterOccupiedHU = "S2502_C05_007",
  MultiracialRenterOccupiedHU = "S2502_C05_008",
  HispanicRenterOccupiedHU = "S2502_C05_009",
  NHWhiteRenterOccupied = "S2502_C05_010",
  HU_lessthan20k = "S2503_C01_025",
  CostBurdened_lessthan20k = "S2503_C01_028",
  HU_20kto34999 = "S2503_C01_029",
  CostBurdened_20kto34999 = "S2503_C01_032",
  HU_35kto49999 = "S2503_C01_033",
  CostBurdened_35kto49999 = "S2503_C01_036",
  HU_50kto74999 = "S2503_C01_037",
  CostBurdened_50kto74999 = "S2503_C01_040",
  HU_75kmore = "S2503_C01_041",
  CostBurdened_75kmore = "S2503_C01_044",
  emp_pop_16over = "DP03_0001",
  InLaborForce = "DP03_0002",
  unemployed = "DP03_0005",
  pct_unemployed = "DP03_0005P",
  emp_PrivateForProfit = "S2408_C01_002",
  emp_PrivatNonProfit = "S2408_C01_005",
  emp_LocalGov = "S2408_C01_006",
  emp_StateGov = "S2408_C01_007",
  emp_FedGov = "S2408_C01_008",
  emp_SelfEmploy = "S2408_C01_009",
  Workers16over = "S0801_C01_001",
  WorkersDroveAlone = "S0801_C01_003",
  WorkersCarpooled = "S0801_C01_004",
  WorkersPublicTransport = "S0801_C01_009",
  WorkersWalked = "S0801_C01_010",
  WorkersBicycle = "S0801_C01_011",
  WorkersTaxiMotorcycleOther = "S0801_C01_012",
  WorkersWorkFromHome = "S0801_C01_013",
  WorkersNotWorkFromHome = "S0801_C01_026",
  WorkersTravelLess10min = "S0801_C01_037",
  WorkersTravel10to14min = "S0801_C01_038",
  WorkersTravel15to19min = "S0801_C01_039",
  WorkersTravel20to24min = "S0801_C01_040",
  WorkersTravel25to29min = "S0801_C01_041",
  WorkersTravel30to34min = "S0801_C01_042",
  WorkersTravel35to44min = "S0801_C01_043",
  WorkersTravel45to59min = "S0801_C01_044",
  WorkersTravel60moremin = "S0801_C01_045",
  WorkersMeanTravelTime = "S0801_C01_046",
  Pop5over = "S1601_C01_001",
  SpeakOnlyEnglish = "S1601_C01_002",
  SpeakSpanish = "S1601_C01_004",
  SpeakIndoEuroLang = "S1601_C01_008",
  SpeakAPILang = "S1601_C01_012",
  SpeakOtherLang = "S1601_C01_016",
  HHWhite = "B25003A_001",
  HHWhiteOwner = "B25003A_002",
  HHWhiteRenter = "B25003A_003",
  HHBlack = "B25003B_001",
  HHBlackOwner = "B25003B_002",
  HHBlackRenter = "B25003B_003",
  HH_AIAN = "B25003C_001",
  HH_AIANOwner = "B25003C_002",
  HH_AIANRenter = "B25003C_003",
  HHAsian = "B25003D_001",
  HHAsianOwner = "B25003D_002",
  HHAsianRenter = "B25003D_003",
  HH_NHPI = "B25003E_001",
  HH_NHPIOwner = "B25003E_002",
  HH_NHPIRenter = "B25003E_003",
  HHOther = "B25003F_001",
  HHOtherOwner = "B25003F_002",
  HHOtherRenter = "B25003F_003",
  HHMultiracial = "B25003G_001",
  HHMultiOwner = "B25003G_002",
  HHMultiRenter = "B25003G_003",
  HH_NHWhite = "B25003H_001",
  HH_NHWhiteOwner = "B25003H_002",
  HH_NHWhiteRenter = "B25003H_003",
  HH_Hispanic = "B25003I_001",
  HH_HispanicOwner = "B25003I_002",
  HH_HispanicRenter = "B25003I_003",
  HispanicMexican = "B03001_004",
  HispanicHonduran = "B03001_011",
  HispanicSpaniard = "B03001_028",
  HispanicCuban = "B03001_006",
  HispanicPuertoRican = "B03001_005",
  HispanicGuatemalan = "B03001_010",
  TotalHH = "B25106_001",
  OwnerHU = "B25106_002",
  owner_occupied_lessthan20k = "B25106_003",
  owner_occupied_lessthan20k_30PercPlus = "B25106_006",
  owner_occupied_20kto34999 = "B25106_007",
  owner_occupied_20kto34999_30PercPlus = "B25106_010",
  owner_occupied_35kto49999 = "B25106_011",
  owner_occupied_35kto49999_30PercPlus = "B25106_014",
  owner_occupied_50kto74999 = "B25106_015",
  owner_occupied_50kto74999_30PercPlus = "B25106_018",
  owner_occupied_75kmore = "B25106_019",
  owner_occupied_75kmore_30PercPlus = "B25106_022",
  Renter_occupied = "B25106_024",
  Renter_occupied_than_20000 = "B25106_025",
  Renter_occupied_Less_than_20000_30PercPlus = "B25106_028",
  Renter_occupied_20000_to_34999 = "B25106_029",
  Renter_occupied_20000_to_3499930_percent_or_more = "B25106_032",
  Renter_occupied_35000_to_49999 = "B25106_033",
  Renter_occupied_35000_to_4999930_percent_or_more = "B25106_036",
  Renter_occupied_50000_to_74999 = "B25106_037",
  Renter_occupied_50000_to_7499930_percent_or_more = "B25106_040",
  Renter_occupied_75000_or_more = "B25106_041",
  Renter_occupied_75000_or_more30_percent_or_more = "B25106_044",
  MaleTotalPop = "S0101_C03_001",
  MaleUnder_5_years = "S0101_C03_002",
  Male5_to_9_years = "S0101_C03_003",
  Male10_to_14_years = "S0101_C03_004",
  Male15_to_19_years = "S0101_C03_005",
  Male20_to_24_years = "S0101_C03_006",
  Male25_to_29_years = "S0101_C03_007",
  Male30_to_34_years = "S0101_C03_008",
  Male35_to_39_years = "S0101_C03_009",
  Male40_to_44_years = "S0101_C03_010",
  Male45_to_49_years = "S0101_C03_011",
  Male50_to_54_years = "S0101_C03_012",
  Male55_to_59_years = "S0101_C03_013",
  Male60_to_64_years = "S0101_C03_014",
  Male65_to_69_years = "S0101_C03_015",
  Male70_to_74_years = "S0101_C03_016",
  Male75_to_79_years = "S0101_C03_017",
  Male80_to_84_years = "S0101_C03_018",
  Male85_years_and_over = "S0101_C03_019",
  FemaleTotalPop = "S0101_C05_001",
  FemaleUnder_5_years = "S0101_C05_002",
  Female5_to_9_years = "S0101_C05_003",
  Female10_to_14_years = "S0101_C05_004",
  Female15_to_19_years = "S0101_C05_005",
  Female20_to_24_years = "S0101_C05_006",
  Female25_to_29_years = "S0101_C05_007",
  Female30_to_34_years = "S0101_C05_008",
  Female35_to_39_years = "S0101_C05_009",
  Female40_to_44_years = "S0101_C05_010",
  Female45_to_49_years = "S0101_C05_011",
  Female50_to_54_years = "S0101_C05_012",
  Female55_to_59_years = "S0101_C05_013",
  Female60_to_64_years = "S0101_C05_014",
  Female65_to_69_years = "S0101_C05_015",
  Female70_to_74_years = "S0101_C05_016",
  Female75_to_79_years = "S0101_C05_017",
  Female80_to_84_years = "S0101_C05_018")

austin_data_county <- get_acs(
  geography = "county",
  variables = profile_vars,
  year = 2023,
  state = "TX",
  county = "Travis",
  output = "wide",
  survey = "acs1"
)

austin_data_place <- get_acs(
  geography = "place",
  variables = profile_vars,
  year = 2023,
  state = "TX",
  output = "wide",
  survey = "acs1"
)%>%
  filter(str_detect(NAME, "Austin"))
